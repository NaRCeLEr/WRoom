{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'main/css/main.css' %}">
    <title>Document</title>
</head>
<body>
    <div class="box">
        <form name="search" method="post" action="{% url 'Search_friends' %}" class="search_box">
            <input type="text" class="input" name="txt" onmouseout="this.value = ''; this.blur();" placeholder="search" id="search">
            <div id="boxx">
                {% for item in object_list %}
                    {{item}}<br>
                {% endfor %}
            </div>
        </form>
        <i class="fas fa-search"></i>
    
    
    </div>
    <script>
        const data = '{{qs_json}}'
        console.log(data)

        const rdata = JSON.parse(data.replace(/&quot;/g, '"'))
        console.log(rdata)

        const input = document.getElementById('search')
        console.log(input)

        let filteredArr = []

        input.addEventListener('keyup', (e)=>{
            boxx.innerHTML = ''
            filteredArr = rdata.filter(info=> info['username'].includes(e.target.value))
            console.log(filteredArr)

            if (filteredArr.length > 0) {
                filteredArr.map(info=>{
                    boxx.innerHTML += `<b>${info['username']}</b><br>`
                })
            } else {
                boxx.innerHTML = '<b>No result</b>'
            }
        }) 
    </script>
</body>
</html>